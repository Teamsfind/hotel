<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kcsj.dao.AttdMapper" >
  <resultMap id="BaseResultMap" type="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    <id column="attd_id" property="attdId" jdbcType="INTEGER" />
    <result column="user_number" property="userNumber" jdbcType="INTEGER" />
    <result column="attd_begintime" property="attdBegintime" jdbcType="TIMESTAMP" />
    <result column="attd_endtime" property="attdEndtime" jdbcType="TIMESTAMP" />
    <result column="attd_vaction_begintime" property="attdVactionBegintime" jdbcType="TIMESTAMP" />
    <result column="attd_vaction_endtime" property="attdVactionEndtime" jdbcType="TIMESTAMP" />
    <result column="attd_vaction_remark" property="attdVactionRemark" jdbcType="VARCHAR" />
    <result column="attd_travel_begintime" property="attdTravelBegintime" jdbcType="TIMESTAMP" />
    <result column="attd_travel_endtime" property="attdTravelEndtime" jdbcType="TIMESTAMP" />
    <result column="attd_travel_place" property="attdTravelPlace" jdbcType="VARCHAR" />
    <result column="attd_travel_remark" property="attdTravelRemark" jdbcType="VARCHAR" />
    <result column="attd_remark" property="attdRemark" jdbcType="VARCHAR" />
    <result column="attd_status" property="attdStatus" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    attd_id, user_number, attd_begintime, attd_endtime, attd_vaction_begintime, attd_vaction_endtime, 
    attd_vaction_remark, attd_travel_begintime, attd_travel_endtime, attd_travel_place, 
    attd_travel_remark,  attd_remark, attd_status
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from attd
    where attd_id = #{attdId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    delete from attd
    where attd_id = #{attdId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    insert into attd (attd_id, user_number, attd_begintime, 
      attd_endtime, attd_vaction_begintime, 
      attd_vaction_endtime, attd_vaction_remark, 
      attd_travel_begintime, attd_travel_endtime, 
      attd_travel_place, attd_travel_remark, attd_remark, attd_status
      )
    values (#{attdId,jdbcType=INTEGER}, #{userNumber,jdbcType=INTEGER}, #{attdBegintime,jdbcType=TIMESTAMP}, 
      #{attdEndtime,jdbcType=TIMESTAMP}, #{attdVactionBegintime,jdbcType=TIMESTAMP}, 
      #{attdVactionEndtime,jdbcType=TIMESTAMP}, #{attdVactionRemark,jdbcType=VARCHAR}, 
      #{attdTravelBegintime,jdbcType=TIMESTAMP}, #{attdTravelEndtime,jdbcType=TIMESTAMP}, 
      #{attdTravelPlace,jdbcType=VARCHAR}, #{attdTravelRemark,jdbcType=VARCHAR}, #{attdRemark,jdbcType=VARCHAR}, #{attdStatus,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    insert into attd
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="attdId != null" >
        attd_id,
      </if>
      <if test="userNumber != null" >
        user_number,
      </if>
      <if test="attdBegintime != null" >
        attd_begintime,
      </if>
      <if test="attdEndtime != null" >
        attd_endtime,
      </if>
      <if test="attdVactionBegintime != null" >
        attd_vaction_begintime,
      </if>
      <if test="attdVactionEndtime != null" >
        attd_vaction_endtime,
      </if>
      <if test="attdVactionRemark != null" >
        attd_vaction_remark,
      </if>
      <if test="attdTravelBegintime != null" >
        attd_travel_begintime,
      </if>
      <if test="attdTravelEndtime != null" >
        attd_travel_endtime,
      </if>
      <if test="attdTravelPlace != null" >
        attd_travel_place,
      </if>
      <if test="attdTravelRemark != null" >
        attd_travel_remark,
      </if>
      
      <if test="attdRemark != null" >
        attd_remark,
      </if>
      <if test="attdStatus != null" >
        attd_status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="attdId != null" >
        #{attdId,jdbcType=INTEGER},
      </if>
      <if test="userNumber != null" >
        #{userNumber,jdbcType=INTEGER},
      </if>
      <if test="attdBegintime != null" >
        #{attdBegintime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdEndtime != null" >
        #{attdEndtime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdVactionBegintime != null" >
        #{attdVactionBegintime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdVactionEndtime != null" >
        #{attdVactionEndtime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdVactionRemark != null" >
        #{attdVactionRemark,jdbcType=VARCHAR},
      </if>
      <if test="attdTravelBegintime != null" >
        #{attdTravelBegintime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdTravelEndtime != null" >
        #{attdTravelEndtime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdTravelPlace != null" >
        #{attdTravelPlace,jdbcType=VARCHAR},
      </if>
      <if test="attdTravelRemark != null" >
        #{attdTravelRemark,jdbcType=VARCHAR},
      </if>
      
      <if test="attdRemark != null" >
        #{attdRemark,jdbcType=VARCHAR},
      </if>
      <if test="attdStatus != null" >
        #{attdStatus,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    update attd
    <set >
      <if test="userNumber != null" >
        user_number = #{userNumber,jdbcType=INTEGER},
      </if>
      <if test="attdBegintime != null" >
        attd_begintime = #{attdBegintime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdEndtime != null" >
        attd_endtime = #{attdEndtime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdVactionBegintime != null" >
        attd_vaction_begintime = #{attdVactionBegintime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdVactionEndtime != null" >
        attd_vaction_endtime = #{attdVactionEndtime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdVactionRemark != null" >
        attd_vaction_remark = #{attdVactionRemark,jdbcType=VARCHAR},
      </if>
      <if test="attdTravelBegintime != null" >
        attd_travel_begintime = #{attdTravelBegintime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdTravelEndtime != null" >
        attd_travel_endtime = #{attdTravelEndtime,jdbcType=TIMESTAMP},
      </if>
      <if test="attdTravelPlace != null" >
        attd_travel_place = #{attdTravelPlace,jdbcType=VARCHAR},
      </if>
      <if test="attdTravelRemark != null" >
        attd_travel_remark = #{attdTravelRemark,jdbcType=VARCHAR},
      </if>
      <if test="attdRemark != null" >
        attd_remark = #{attdRemark,jdbcType=VARCHAR},
      </if>
      <if test="attdStatus != null" >
        attd_status = #{attdStatus,jdbcType=INTEGER},
      </if>
    </set>
    where attd_id = #{attdId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    update attd
    set user_number = #{userNumber,jdbcType=INTEGER},
      attd_begintime = #{attdBegintime,jdbcType=TIMESTAMP},
      attd_endtime = #{attdEndtime,jdbcType=TIMESTAMP},
      attd_vaction_begintime = #{attdVactionBegintime,jdbcType=TIMESTAMP},
      attd_vaction_endtime = #{attdVactionEndtime,jdbcType=TIMESTAMP},
      attd_vaction_remark = #{attdVactionRemark,jdbcType=VARCHAR},
      attd_travel_begintime = #{attdTravelBegintime,jdbcType=TIMESTAMP},
      attd_travel_endtime = #{attdTravelEndtime,jdbcType=TIMESTAMP},
      attd_travel_place = #{attdTravelPlace,jdbcType=VARCHAR},
      attd_travel_remark = #{attdTravelRemark,jdbcType=VARCHAR},
      attd_remark = #{attdRemark,jdbcType=VARCHAR},
      attd_status = #{attdStatus,jdbcType=INTEGER}
    where attd_id = #{attdId,jdbcType=INTEGER}
  </update>
  
  <!-- 考勤信息 -->
  	<select id="findattdayAll" resultType="com.kcsj.entitl.preAttdData" >
	  	SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,u.user_dpt_jbn as userdptjob,a.attd_begintime as attdBegintime,a.attd_endtime as attdEndtime
	  	FROM attd a,user u
	  	WHERE  a.attd_begintime !='' and to_days(attd_begintime) =to_days(now()) and a.user_number=u.user_number  order by attdBegintime   
  	</select>
  	
  	<select id="findUserAttdayAll" resultType="com.kcsj.entitl.preAttdData" parameterType="java.lang.String">
	  	SELECT a.user_number as usernumber,u.user_username as username,u.user_dpt as userdpt,u.user_dpt_jbn as userdptjob,a.attd_begintime as attdBegintime,a.attd_endtime as attdEndtime
	  	FROM attd a,user u
	  	WHERE  a.attd_begintime !='' and a.user_number=u.user_number  and a.user_number= #{usernumber,jdbcType=VARCHAR} order by attdBegintime  desc
  	</select>
  	
  	<select id="findUserAttdayAllMonth" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
  		 select 
   	 <include refid="Base_Column_List" />
    from attd
    where user_number = #{usernumber,jdbcType=INTEGER} and attd_begintime !='' and DATE_FORMAT(attd_begintime, '%Y%m') = DATE_FORMAT( now() , '%Y%m')-1
  	</select>
  	
  	<select id="findUserAttdayAllMonthDang" resultType="com.kcsj.entitl.preAttdData" parameterType="java.lang.String" >
  		SELECT a.user_number as usernumber,u.user_username as username,u.user_dpt as userdpt,u.user_dpt_jbn as userdptjob,a.attd_begintime as attdBegintime,a.attd_endtime as attdEndtime
	  	FROM attd a,user u
	  	WHERE  a.attd_begintime !='' and a.user_number=u.user_number  and a.user_number= #{usernumber,jdbcType=VARCHAR} and DATE_FORMAT(attd_begintime, '%Y%m') = DATE_FORMAT( now() , '%Y%m')-1 order by attdBegintime  asc
  	</select>
  	
  	<!-- 休假信息 -->
  	<select id="findvacationdayAll" resultType="com.kcsj.entitl.preAttdData" >
	  	SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,user_dpt_jbn as userdptjob,a.attd_vaction_remark as attdVactionRemark,a.attd_vaction_begintime as attdVactionBegintime,a.attd_vaction_endtime as attdVactionEndtime
	  	FROM attd a,user u
	  	WHERE  attd_vaction_begintime !='' and to_days(attd_vaction_begintime) =to_days(now()) and a.user_number=u.user_number  order by attdVactionBegintime   
  	</select>
  	
  	<select id="findUserVacationdayAll" resultType="com.kcsj.entitl.preAttdData" parameterType="java.lang.String">
	  	SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,user_dpt_jbn as userdptjob,a.attd_vaction_remark as attdVactionRemark,a.attd_vaction_begintime as attdVactionBegintime,a.attd_vaction_endtime as attdVactionEndtime
	  	FROM attd a,user u
	  	WHERE  attd_vaction_begintime !='' and a.user_number=u.user_number  and a.user_number= #{usernumber,jdbcType=VARCHAR} order by attdVactionBegintime  desc
  	</select>
  	
  	<select id="findUserVacationdayAllMonth" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
  		 select 
   	 <include refid="Base_Column_List" />
    from attd
    where user_number = #{usernumber,jdbcType=INTEGER} and attd_vaction_begintime !='' and DATE_FORMAT(attd_vaction_begintime, '%Y%m') = DATE_FORMAT( now() , '%Y%m')-1 
  	</select>
  	
  	<select id="findUserVacationdayAllMonthDang" resultType="com.kcsj.entitl.preAttdData" parameterType="java.lang.String" >
  		SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,user_dpt_jbn as userdptjob,a.attd_vaction_remark as attdVactionRemark,a.attd_vaction_begintime as attdVactionBegintime,a.attd_vaction_endtime as attdVactionEndtime
	  	FROM attd a,user u
	  	WHERE  attd_vaction_begintime !='' and a.user_number=u.user_number  and a.user_number= #{usernumber,jdbcType=VARCHAR} and DATE_FORMAT(attd_vaction_begintime, '%Y%m') = DATE_FORMAT( now() , '%Y%m')-1 order by attdVactionBegintime  asc
  	</select>
  	
  	<!-- 出差信息 -->
  	<select id="findTraveldayAll" resultType="com.kcsj.entitl.preAttdData" >
	  	SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,user_dpt_jbn as userdptjob,a.attd_travel_begintime as attdTravelBegintime,a.attd_travel_endtime as attdTravelEndtime,a.attd_travel_place as attdTravelPlace,a.attd_travel_remark as attdTravelRemark
	  	FROM attd a,user u
	  	WHERE   attd_travel_begintime !='' and to_days(attd_travel_begintime) =to_days(now()) and a.user_number=u.user_number  order by attdTravelBegintime   
  	</select>
  	
  	<select id="findUserTravelAll" resultType="com.kcsj.entitl.preAttdData" parameterType="java.lang.String">
	  	SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,user_dpt_jbn as userdptjob,a.attd_travel_begintime as attdTravelBegintime,a.attd_travel_endtime as attdTravelEndtime,a.attd_travel_place as attdTravelPlace,a.attd_travel_remark as attdTravelRemark
	  	FROM attd a,user u
	  	WHERE  attd_travel_begintime !='' and a.user_number=u.user_number  and a.user_number= #{usernumber,jdbcType=VARCHAR} order by attdTravelBegintime  desc
  	</select>
  	
  	<select id="findUserTravelAllMonth" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
  		 select 
   	 <include refid="Base_Column_List" />
    from attd
    where user_number = #{usernumber,jdbcType=INTEGER} and attd_travel_begintime !='' and DATE_FORMAT(attd_travel_begintime, '%Y%m') = DATE_FORMAT( now() , '%Y%m')-1
  	</select>
  	
  	<select id="findUserTravelAllMonthDang" resultType="com.kcsj.entitl.preAttdData" parameterType="java.lang.String" >
  		SELECT u.user_username as username,a.user_number as usernumber,u.user_dpt as userdpt,user_dpt_jbn as userdptjob,a.attd_travel_begintime as attdTravelBegintime,a.attd_travel_endtime as attdTravelEndtime,a.attd_travel_place as attdTravelPlace,a.attd_travel_remark as attdTravelRemark
	  	FROM attd a,user u
	  	WHERE  attd_travel_begintime !='' and a.user_number=u.user_number  and a.user_number= #{usernumber,jdbcType=VARCHAR} DATE_FORMAT(attd_travel_begintime, '%Y%m') = DATE_FORMAT( now() , '%Y%m')-1 order by attdTravelBegintime  asc
  	
  	</select>
  	
  	<insert id="InsertTravelAllMonth" parameterType="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    insert into attd ( user_number, 
      attd_travel_begintime, attd_travel_endtime, 
      attd_travel_place
      )
    values (#{userNumber,jdbcType=INTEGER},
      #{attdTravelBegintime,jdbcType=TIMESTAMP}, #{attdTravelEndtime,jdbcType=TIMESTAMP}, 
      #{attdTravelPlace,jdbcType=VARCHAR}
      )
  </insert>
  
  <insert id="InsertVacationAllMonth" parameterType="com.kcsj.pojo.Attd" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 10:51:25 CST 2018.
    -->
    insert into attd ( user_number,attd_vaction_begintime, 
      attd_vaction_endtime, attd_vaction_remark
     
      )
    values (#{userNumber,jdbcType=INTEGER}, #{attdVactionBegintime,jdbcType=TIMESTAMP}, 
      #{attdVactionEndtime,jdbcType=TIMESTAMP}, #{attdVactionRemark,jdbcType=VARCHAR}
     )
  </insert>
</mapper>